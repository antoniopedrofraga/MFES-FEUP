package gui;

import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.Iterator;

import javax.swing.JButton;
import javax.swing.JLabel;
import javax.swing.JPanel;

import org.overture.codegen.runtime.VDMMap;
import org.overture.codegen.runtime.VDMSet;

import vdmpp.Model;

public class ConfigIterator extends JPanel {
	JButton left;
	JButton right;
	JLabel text;
	VDMSet validConfigs;

	int iterator = 1;
	int size;

	ConfigIterator(Model model) {
		left = new JButton("<");
		right = new JButton(">");
		left.setEnabled(false);

		validConfigs = model.generateValidConfigs();
		size = validConfigs.size();

		text = new JLabel(iterator + " of " + size);
		this.setLayout(new GridLayout(1, 3));
		this.add(left);
		this.add(text);
		this.add(right);


		left.addActionListener(new ActionListener() { 
			public void actionPerformed(ActionEvent e) { 
				iterator--;
				updateButtons();
			} 
		} );
		right.addActionListener(new ActionListener() { 
			public void actionPerformed(ActionEvent e) { 
				iterator++;
				updateButtons();
			}
		} );
	}
	
	private void updateButtons() {
		if (iterator == 1) {
			left.setEnabled(false);
			right.setEnabled(true);
		} else if (iterator == size) {
			left.setEnabled(true);
			right.setEnabled(false);
		} else {
			
		}
	} 

	private VDMMap getMapFromIndex() {
		int index = 1;
		for (Iterator i = validConfigs.iterator(); i.hasNext();) {
			index++;
			VDMMap map = (VDMMap) i.next();
			if (index == iterator) return map;
		}
		return null;
	}
}
